<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="action_pos_payment_mark_as_delivered" model="ir.actions.server">
        <field name="name">Entregar</field>
        <field name="model_id" ref="point_of_sale.model_pos_payment" />
        <field name="binding_model_id" ref="point_of_sale.model_pos_payment"/>
        <field name="binding_view_types">form,list</field>
        <field name="state">code</field>
        <field name="code">action = records.action_mark_as_delivered()</field>
    </record>

    <record id="action_pos_payment_set_panamerican_true" model="ir.actions.server">
        <field name="name">Marcar como Panamerican</field>
        <field name="model_id" ref="point_of_sale.model_pos_payment"/>
        <field name="binding_model_id" ref="point_of_sale.model_pos_payment"/>
        <field name="binding_view_types">form,list</field>
        <field name="state">code</field>
        <field name="code">action = records.action_set_panamerican_true()</field>
        <field name="groups_id" eval="[(6, 0, [ref('xas_pos_extend.group_panamerican_payment')])]"/>
    </record>

    <record id="view_pos_payment_form_inherit_xas_pos_extend" model="ir.ui.view">
        <field name="name">pos.payment.form.inherit.xas.pos.extend</field>
        <field name="model">pos.payment</field>
        <field name="inherit_id" ref="point_of_sale.view_pos_payment_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="before">
                <header>
                    <button name="action_set_panamerican_true" 
                        type="object"
                        string="Entrega a Panamericana"
                        groups="xas_pos_extend.group_panamerican_payment"/>
                </header>
            </xpath>
            <xpath expr="//group/field[@name='session_id']" position="after">
                <field name="xas_delivered" readonly="1"/>
                <field name="xas_panamerican" readonly="1" groups="xas_pos_extend.group_panamerican_payment"/>
            </xpath>
        </field>
    </record>

    <record id="view_pos_payment_tree_inherit_xas" model="ir.ui.view">
        <field name="name">pos.payment.tree.xas.extend</field>
        <field name="model">pos.payment</field>
        <field name="inherit_id" ref="point_of_sale.view_pos_payment_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree/field[last()]" position="after">
                <field name="xas_delivered"/>
                <field name="xas_panamerican" readonly="1" groups="xas_pos_extend.group_panamerican_payment"/>
            </xpath>
        </field>
    </record>

    <!-- Vista que hereda el metodo de pago -->
    <record id="pos_payment_method_view_form_inherit_xas" model="ir.ui.view">
        <field name="name">pos_payment_method_view_form_inherit_xas</field>
        <field name="model">pos.payment.method</field>
        <field name="inherit_id" ref="point_of_sale.pos_payment_method_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group//group[1]" position="inside">
                <field name="xas_locked_for_cashier"/>
            </xpath>
        </field>
    </record>
</odoo>